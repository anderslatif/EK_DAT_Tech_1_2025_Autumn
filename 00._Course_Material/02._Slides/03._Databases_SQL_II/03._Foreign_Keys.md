<div class="title-card">
    <h1>Foreign Keys</h1>
</div>

---

# Foreign Keys - the missing link

With foreign keys, we can create a relationship between two tables. 

A foreign key is a value that exists in the other table. (Think back to the random access slide).

*Why not just put all data in one table?*

Let's go through the classic example of `citizen_addresses` and `postal_codes` and try to answer the question again after... 

---

# Why Foreign Keys and not all in one table?

Conclusion: 

- A set of data could be relevant to more than just 1 table. Add a `municipalities` table to the previous example.

- They save space.

- Foreign Keys saves time when we want to update data. Imagine updating 1 row vs. x amount of rows.

- Foreign Keys are indexed which creates faster joins. 

---

# Games and studios

We want to create a studios table. 

*Can you describe the relation between games and studios?*

<details> 
  <summary>Answer</summary>
   One game can have only one studio. One studio can have many games.
</details>

**Assignment**: Create a `studios` table

---

# First we create the `studios` table

```sql
CREATE TABLE IF NOT EXISTS studios (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL
);
```

*For the next step, do you remember how we "delete" the games table?*

---

# Add a foreign key to games

Doing it from scratch:

```sql
DROP TABLE games;

CREATE TABLE IF NOT EXISTS games (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    release_date DATE NOT NULL,
    studio_id INT,
    FOREIGN KEY (studio_id) REFERENCES studios(id)
);
```

Or using `ALTER TABLE` to avoid losing data:

```sql
ALTER TABLE games
ADD COLUMN studio_id INT,
ADD CONSTRAINT fk_studio
FOREIGN KEY (studio_id) REFERENCES studios(id);
```

---

# This is it!

You have added a foreign key. Look in DataGrip what that looks like. 
